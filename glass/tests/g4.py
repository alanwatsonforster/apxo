from glass.tests.infrastructure import *

startfile(__file__, "HRD")

# Half Roll and Dive

starttestsetup()
A1 = setupaircraft("A1", "AF", "F-80C", "A1-2015", "N", 20, 4.0, "CL")
A2 = setupaircraft("A2", "AF", "F-80C", "A1-2215", "N", 20, 4.0, "CL")
A3 = setupaircraft("A3", "AF", "F-80C", "A1-2415", "N", 20, 5.0, "CL")
A4 = setupaircraft("A4", "AF", "F-80C", "A1-2615", "N", 20, 5.0, "CL")
A5 = setupaircraft("A5", "AF", "F-104A", "A1-2815", "N", 20, 7.0, "CL")  # SS
endtestsetup()

startgameturn()
A1.move("LVL/HRD", "N", "")
asserterror("invalid flight type 'LVL/HRD'.")
startgameturn()
A1.move("HRD/SD", "N", "")
asserterror("flight type immediately after LVL cannot be SD with a HRD.")
startgameturn()
A1.move("UD/HRD", "N", "")
asserterror("invalid flight type 'UD/HRD'.")
startgameturn()
A1.move("ZC/HRD", "N", "")
asserterror("invalid flight type 'ZC/HRD'.")
startgameturn()
A1.move("SC/HRD", "N", "")
asserterror("invalid flight type 'SC/HRD'.")
startgameturn()
A1.move("VC/HRD", "N", "")
asserterror("invalid flight type 'VC/HRD'.")
startgameturn()
A1.move("HRD/VD", "N", "H,D2,D2,D2")
A1._assert("A1-2014       N    14", 5.5)

startgameturn()
A1.move("ZC", "M", "H,H,H,C")
A1._assert("A1-2012       N    21", 4.0)
A2.move("SC", "M", "H,H,H,C")
A2._assert("A1-2212       N    20", 4.0)
A3.move("ZC", "M", "H,H,H,H,C")
A3._assert("A1-2411       N    21", 5.0)
A4.move("SC", "M", "H,H,H,H,C")
A4._assert("A1-2611       N    20", 5.0)

A5.move("HRD/VD", "AB", "H,H,D2,D2,D2,D2,D2")
A5._assert("A1-2813       N    10", 10.0)

endgameturn()

startgameturn()
A1.move("LVL/HRD", "N", "")
asserterror("invalid flight type 'LVL/HRD'.")
startgameturn()
A1.move("HRD/SD", "N", "")
asserterror("flight type immediately after ZC cannot be SD with a HRD.")
startgameturn()
A1.move("UD/HRD", "N", "")
asserterror("invalid flight type 'UD/HRD'.")
startgameturn()
A1.move("ZC/HRD", "N", "")
asserterror("invalid flight type 'ZC/HRD'.")
startgameturn()
A1.move("SC/HRD", "N", "")
asserterror("invalid flight type 'SC/HRD'.")
startgameturn()
A1.move("VC/HRD", "N", "")
asserterror("invalid flight type 'VC/HRD'.")
startgameturn()
A3.move("HRD/VD", "M", "")
asserterror("flight type immediately after ZC cannot be VD (without a low-speed HRD).")
startgameturn()
A4.move("HRD/VD", "M", "")
asserterror("flight type immediately after SC cannot be VD (without a low-speed HRD).")

startgameturn()
A1.move("HRD/VD", "M", "H,D3,D3,D3")
A1._assert("A1-2011       N    12", 6.5)
A2.move("HRD/VD", "M", "H,D3,D3,D3")
A2._assert("A1-2211       N    11", 6.5)
A3.move("VC", "M", "H,H,C,C,C")
A3._assert("A1-2409       N    24", 4.5)
A4.move("VC", "M", "H,H,C,C,C")
A4._assert("A1-2609       N    23", 4.5)
A5.move("SD", "AB", "H,H,H,H,H,D,D,D,D,D")
A5._assert("A1-2808       N     5", 9.0)
endgameturn()

startgameturn()
A1.move("SD", "N", "H,H,H,D,D,D")
A1._assert("A1-2008       N     9", 6.5)
A2.move("SD", "N", "H,H,H,D,D,D")
A2._assert("A1-2208       N     8", 6.5)
A3.move("HRD/SD", "M", "H,H,D,D")
A3._assert("A1-2407       N    22", 4.5)
A4.move("HRD/SD", "M", "H,H,D,D")
A4._assert("A1-2607       N    21", 5.0)
A5.move("ZC", "AB", "H,H,H,H,C2,C2,C2,C2,C2")
A5._assert("A1-2804       N    15", 8.0)

endgameturn()

endfile(__file__)
